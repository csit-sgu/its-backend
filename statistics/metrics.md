## Своевременность проведения регламентных работ
### Что оценивается: когда регламентные работы завершаются относительно дедлайна по фильтру
### Чем больше значение, тем своевременнее сделана работа.

* $D$ - время дедлайна работы
* $E$ - время фактического завершения работы (последняя transition_at для задачи
  в task_transitions)
* $N$ - количество регламентных работ относительно одного фильтра

### Вариант 1

$$M_1 = \frac{\sum_N (D - E)^3}{N}$$

### Вариант 2

$$M_1 = \frac{\sum_N e^{(D - E)}}{N}$$

## Регулярность проведения регламентных работ

### Что оценивается: как часто проводятся регламентные работы в указанном промежутке времени

* $N$ - количество проведенных регламентных работ
* $D^1_i$ - начало $i$-й регламентной работы
* $D^2_i$ - конец $i$-й регламентной работы
* $R$ - ожидаемая регулярность (через сколько должна быть следующая работа)

### Вариант 1

$$M_2 = |\frac{\sum_N (D^1_i - D^1_{i - 1})}{N} - R|$$

$$M'_2 = |\frac{\sum_N (D^2_i - D^2_{i - 1})}{N} - R|$$

Насколько в среднем значение отклоняется от ожидаемой регулярности.

### Вариант 2

$$M_2 = \frac{\sum_N |(D^1_i - D^1_{i - 1}) - R|}{N}$$

Чем ближе значение к $0$, тем лучше.

## Скорость устранения инцидентов

### Что оценивается: насколько быстро устраняются инциденты по конкретному фильтру 
### Чем ближе значение к 0, тем скорость устранения выше.

* $D^1_i$ - время появления $i$-го инцидента
* $D^2_i$ - время завершения $i$-го инцидента (последняя transition_at для задачи в task_transitions)
* $N$ - количество инцидентов по фильтру

$$M_3 = \frac{\sum_N (D^2_i - D^1_i)^3}{N}$$

## Оценка повторных инцидентов

### Что оценивается: насколько быстро последующие инциденты завершаются относительно конкретного фильтра.
### Если значение большое, значит инциденты появляются медленнее.

Вес каждого повторного инцидента больше.

* $N$ - количество инцидентов
* $D^1_i$ - время появления $i$-го инцидента
* $D^2_i$ - время завершения $i$-го инцидента (последняя transition_at для задачи в task_transitions)
* $R^1_i$ - время начала $i$-й регламентной работы
* $R^2_i$ - время окончания $i$-й регламентной работы

$$M_4 = \frac{\sum_N (D^1_i - R_i)}{N}$$

**Чем ближе значение к 0, тем чаще появляются инциденты - это плохо.**

Если хотим больше поощрять за долгое время без инцидентов:

$$M_4 = \frac{\sum_N (D^1_i - R_i)^3}{N}$$

### Вариант, где учитывается количество инцидентов между проверками

* $C$ - ожидаемое количество времени без инцидентов (между плановыми проверками)
* $N_d$ - количество инцидентов между плановыми проверками
* $N_r$ - количество проверок
* $C - (D^1_{j} - R^2_{i - 1})$ - сколько времени оставалось до плановой проверки

$$C = R^1_i - R^2_{i - 1}$$
$$N_d = \bigg|D_i^1 \in [R_{i-1}^2, R_i^1]\bigg|$$

Таким образом

$$M_4 = \sum^{N_r}_i N_d \cdot \sum^{N_d}_j (C - (D^1_{j} - R^2_{i - 1}))^2$$

**Чем ближе значение к 0, тем лучше.**

### TODO: Вариант, где учитывается инцидент после инцидента


## Количество возвратов задач на доработку

Оценка для каждой задачи того, сколько раз её переводили на состояние, которое
уже эта задача принимала (количество повторений task_stage_id).

* $S_i$ - $i$-е состояние задачи
* $N$ - количество состояний задач
* $M_{S_i}$ - количество повторов состояния $S_i$

$$M_5 = \frac{(\sum_{N} M_{S_{i}}) - N}{N}$$

**Чем ближе значение к $0$, тем лучше.**
